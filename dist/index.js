import{useEffect as e}from"react";const o=({onSuccess:o,onFailed:r})=>(e((()=>{const e=new URLSearchParams(window.location.search).get("code");e&&(localStorage.setItem("code",e),localStorage.setItem("forceLogin","true"),window.close())}),[]),e((()=>{const e=e=>{if("forceLogin"===e.key&&"true"===e.newValue){localStorage.removeItem("forceLogin");const e=localStorage.getItem("code");e?o(e):r("Login failed")}};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}),[o,r]),{login:({redirectUrl:e,clientKey:o,scope:t})=>{if(!e)return console.error("redirectUrl is required"),void r("redirectUrl is required");const c=`https://account.viewboost.xyz/?redirectUrl=${e}&clientKey=${o}&responseType=code&scope=${t}`;window.open(c)}});export{o as useLoginViewBoost};
